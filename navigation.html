<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">WebTemplate</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
      </li>
      <li class="nav-item">
      </li>
    </ul>
    <ul id="navbar" class="navbar-nav">
    </ul>
  </div>
</nav>
<script>
  User.isTokenValid(function(obj) {
    if (obj) {
      /*$("#navbar").append('<li class="nav-item dropdown">' +
        '<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' +
          '<span class="fa fa-envelope fa-fw"/>' +
        '</a>' +
        '<div id="navbarMessageDropdown" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">' +
        '</div>' +
      '</li>');
      Message.getAll(function (response) {
        if(!response.hasOwnProperty('error')) {
          for (var obj in response) {
            $('#navbarMessageDropdown').append('<li><div><strong>' + response[obj]["subject"] + '</strong><span class="pull-right text-muted"><em>' + response[obj]["from"] +
                                               '</em></span></div><div>' + response[obj]["message"] + '</div></li>' +
                                               '<li class="divider"></li><li><li class="divider"></li><li>');
          }
          $('#navbarMessageDropdown').append('<a class="text-center" href="message.html"><strong>Read All Messages</strong><i class="fa fa-angle-right"></i></a></li>');
        }
      });*/
      User.get(function(obj) {
        if (obj["level"]["id"] == 0) {
          $("#navbar").append('<li class="nav-item dropdown">' +
            '<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' +
              '<span class="fa fa-support"/>' +
            '</a>' +
            '<div id="navbar_user_dropdown" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">' +
              '<a style="cursor:pointer;" class="nav-link" href="dashboard.html">Dashboard</a>' +
              '<a style="cursor:pointer;" class="nav-link" href="config.html">Config</a>' +
            '</div>' +
          '</li>');
        }
      });
      $("#navbar").append('<li class="nav-item dropdown">' +
        '<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' +
          '<span class="fa fa-user-circle"/>' +
        '</a>' +
        '<div id="navbar_user_dropdown" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">' +
          '<a style="cursor:pointer;" class="nav-link" href="settings.html">Settings</a>' +
          '<a style="cursor:pointer;" class="nav-link" onclick="User.logout()">Logout</a>' +
        '</div>' +
      '</li>');
    } else {
      $("#navbar").append('<li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>');
      User.isRegistrationEnabled(function(obj) {
        if (obj) {
          $("#navbar").append('<li class="nav-item"><a style="cursor:pointer;" class="nav-link" href="register.html">Register</a></li>');
        }
      });
    }
  });
</script>
